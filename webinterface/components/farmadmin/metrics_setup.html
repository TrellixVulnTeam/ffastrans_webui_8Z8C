<html>
<head>

<link rel="stylesheet" href="/alternate-server/css/override.css"/>
<script src="../../dependencies/jquery/jquery.js"></script>
<link rel="icon" href="favicon.ico?v=1.1">
<link rel="stylesheet" href="../../dependencies/fontawesome/css/all.css" />
<link href="../../dependencies/bootstrap/bootstrap-5.1.3-dist/css/bootstrap.min.css" rel="stylesheet" >
<script src="../../dependencies/bootstrap/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js" ></script>
<link rel="stylesheet" href="../../dependencies/dhtmlx/dhtmlx.css" type="text/css"/>

<style>
    /* it's important to set width/height to 100% for full-screen init */
    html, body {
        width:100%;
        height:100%
        margin: 0 px;
        overflow: hidden;
    }

	hr {
	  margin-top: 1rem;
	  margin-bottom: 1rem;
	  border: 0;
	  border-top: 1px solid rgba(0, 0, 0, 0.1);
	}
    div, label, input{
        font-size:12px; 
        width: 300px !important;
    }
    form{
        width:100%
    }
    
    fieldset.scheduler-border {
        border: 1px groove #ddd !important;
        padding: 0 1.4em 1.4em 1.4em !important;
        margin: 0 0 1.5em 0 !important;
        -webkit-box-shadow:  0px 0px 0px 0px #000;
                box-shadow:  0px 0px 0px 0px #000;
    }

</style>

<script>
    /* GLOBALS */
    var m_serverconfig, m_userpermissions;

    /*load config from server*/
    function loadserverconfig() {
        $.ajax({
            url: ("/getuserpermissions" + "?" + Math.random()),
            type: "GET",
            success: function(response) {

                m_userpermissions = JSON.parse(response);
                //load serverconfig and initialize page
                $.ajax({
                    url: ("/getserverconfig" + "?" + Math.random()),
                    type: "GET",
                    success: function(response) {
                        console.log("got server conf")
                        m_serverconfig = JSON.parse(response);
                        init();
                    },
                    error: function(xhr, status) {
                        dhtmlx.message("Fatal error, could not load serverconfig. ");
                        document.body.innerHTML = "Fatal error, could not load serverconfig. " + xhr.responseText;
                    }
                });
            },
            error: function(xhr, status) {
                dhtmlx.message("Fatal error, could not load serverconfig. ");
                document.body.innerHTML = "Fatal error, could not load serverconfig. " + xhr.responseText;
            }

        });

    }

        
    /* build basic page layout and init periodic job loading*/
    function init() {

        //check if html5 features supported
        if (typeof(Storage) !== "undefined") {} else {
            dhtmlx.message("ERROR, no html5 store support, cannot save view state")
        }
		//button hover style
		$("div").hover(function(){
		  $(this).parent().addClass("dhxform_btn_over");  //Add the active class to the area is hovered
		}, function () {
		  $(this).parent().removeClass("dhxform_btn_over");
		});
		
		check_install()

    }
    
    function build_new_api_url(what) {
        if (JSON.parse(m_serverconfig['STATIC_USE_PROXY_URL'])) {
            return "/new_proxy" + what;
        } else {
            var _url = "http://" + m_serverconfig['STATIC_API_HOST'] + ":" + m_serverconfig['STATIC_API_NEW_PORT'] + what;
            return _url;
        }
    }

</script>

<body onload="loadserverconfig()" >
<div class="dhx_cell_cont_tabbar" style="left: 0px; top: 31px; width: 954px; height: 909px;">
<div class="dhxform_obj_dhx_skyblue" style="width: 100%; height: 100%; position: relative; overflow: auto; font-size: 12px;">
<div class="dhxform_base">
<div class="fs_dhxform_item_label_top" style="padding-left: 20px !important; padding-top: 20px !important;">
<fieldset class="dhxform_fs" style="width: 798px;">
<legend class="fs_legend" align="dhxform_label_left" style="text-align:dhxform_label_left">Server Configuration</legend>
</fieldset></div></div></div></div>

<div class="dhxform_base">
    <form class="dhxform_obj_dhx_skyblue" style="width:90%" >
        <div class="fs_dhxform_item_label_top" style="padding-left: 20px !important; padding-top: 20px !important; ">
            <fieldset class="dhxform_fs">
                <legend class="fs_legend" style="text-align:dhxform_label_left">Start Time</legend>
                <div class="row mb-3  dhxform_label dhxform_label_align_left">
                  <label for="colFormLabelSm" class="col-sm-0 col-form-label col-form-label-sm">Username</label>
                  <div class="col-sm-2">
                    <input type="username" class="form-control form-control-sm" id="colFormLabelSm" placeholder="Admin username for service installation">
                  </div>
                </div>
                <div class="row mb-3 dhxform_label dhxform_label_align_left">
                <label for="inputPassword4" class="col-sm-0 col-form-label col-form-label-sm">Password</label>
                <div class="col-sm-2">
                    <input type="password" class="form-control form-control-sm"  id="inputPassword4">

                </div>
                </div>
                <div class="dhxform_obj_dhx_skyblue dhxform_btn dhxform_btn_filler">
                    <div class="dhxform_btn_txt dhxform_btn_txt_autowidth" id="btn_save">Save</div>
                </div>
            
            </fieldset>
        </div>
    </form>
</div>
</body>
