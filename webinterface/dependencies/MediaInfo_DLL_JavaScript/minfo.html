<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.32.0/codemirror.min.js"></script>
<link rel="stylesheet" media="all" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.32.0/codemirror.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.32.0/addon/search/searchcursor.min.js"></script>
<script src="../mergely/mergely.js" type="text/javascript"></script>

<link rel="stylesheet" media="all" href="../mergely/mergely.css" />

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<style>

/* layout.css Style */
.upload-drop-zone {
  height: 200px;
  border-width: 2px;
  margin-bottom: 20px;
}

/* skin.css Style*/
.upload-drop-zone {
  color: #ccc;
  border-style: dashed;
  border-color: #ccc;
  line-height: 200px;
  text-align: center
}
.upload-drop-zone.drop {
  color: #222;
  border-color: #222;
}
</style>
<script>
var processing = false;

function analyze(_file) {
//perpare mediainfo
           var MediaInfoJs = document.createElement('script');
            if ('WebAssembly' in window) {
              MediaInfoJs.src = "MediaInfo.js";
            } else {
              MediaInfoJs.src = "MediaInfo.js";
            }
            document.body.appendChild(MediaInfoJs);

            // Continue initialization
            MediaInfoJs.onload = function () {
              var MediaInfoModule, MI, processing = false, CHUNK_SIZE = 1024 * 1024;

              var finish = function() {
                  MI.Close();
                  MI.delete();
                  processing = false;
              }

              // Examples about how to get results
              var showResult = function() {

                MI.Option('Complete', '1');
                alert(MI.Inform());

                finish();
              }

              var parseFile = function(file, callback) {
                if (processing) {
                  return;
                }
                processing = true;
                var offset = 0;

                // Initialise MediaInfo
                MI = new MediaInfoModule.MediaInfo();
                //Open the file
                MI.Open(file, callback);

              }

              // Initialise emscripten module
              MediaInfoModule = MediaInfoLib({'postRun': function() {
                console.debug('MediaInfo ready');
                parseFile(_file, showResult);
              }});};
}


//build document
$(document).ready(function () {
    var dropZone = document.getElementById('drop-zone-left');
    dropZone.ondrop = function(e) {
        e.preventDefault();
        this.className = 'upload-drop-zone';
        analyze(e.dataTransfer.files[0]);
        alert((e.dataTransfer.files))
    }
    dropZone.ondragover = function() {
        this.className = 'upload-drop-zone drop';
        return false;
    }
    dropZone.ondragleave = function() {
        this.className = 'upload-drop-zone';
        return false;
    }
    var dropZone = document.getElementById('drop-zone-right');
    dropZone.ondrop = function(e) {
        e.preventDefault();
        this.className = 'upload-drop-zone';

        analyze(e.dataTransfer.files[0]);
        alert((e.dataTransfer.files))
    }
    dropZone.ondragover = function() {
        this.className = 'upload-drop-zone drop';
        return false;
    }
    dropZone.ondragleave = function() {
        this.className = 'upload-drop-zone';
        return false;
    } 
    
    



    // set editor content
    $('#mergely').mergely({
        license: 'mpl',
        cmsettings: {
            readOnly: false, 
            lineWrapping: true,
        },
        lcs:false,
        sidebar:false,
        viewport:true,
        lhs: function(setValue) {
            setValue('the quick red fox\njumped over the hairy dog');
            
        },
        rhs: function(setValue) {
            setValue('the quick brown fox\njumped over the lazy dog');
            
        }
    });
});

</script>

<body>
<!--<div class="header_menu"><input class="btn btn-primary" value="Clear" style="margin:5px" type="submit"/></div>-->
<div style="height: 100%; background-color: rgba(255,0,0,0.1);">
  <div class="h-100 d-inline-block file-upload-wrapper" style="width:49%; background-color: rgba(0,0,255,.1)">Height 25%  <input type="file_left" id="input-file-now" class="file-upload" />
    <input type="file" id="input-file-now" class="file-upload" />
          <div class="upload-drop-zone" id="drop-zone-left">
            Just drag and drop files here
          </div>
  </div>
  <div class="h-100 d-inline-block file-upload-wrapper" style="width:50%; background-color: rgba(0,255,255,.1)">Height 50% 
   
  <input type="file" id="input-file-now" class="file-upload" />
          <div class="upload-drop-zone" id="drop-zone-right">
            Just drag and drop files here
          </div>
  </div>
  
</div>
<!--
<div class="mergely-full-screen-8" style="position:relative;visibility:hidden">
  <div class="mergely-resizer">
    <div id="mergely"></div>
  </div>
</div>
-->
</body>