<html>
<head>

<script src="../dependencies/dhtmlx/dhtmlx.js"></script>
<link rel="stylesheet" href="../dependencies/dhtmlx/dhtmlx.css" type="text/css"/> 
<script src="../dependencies/dhtmlx/vault/vault.js"></script>
<link rel="stylesheet" href="../dependencies/dhtmlx/vault/vault.css" type="text/css"/> 
<script src="../dependencies/jquery/jquery.js"></script>
<link rel="stylesheet" href="../dependencies/fontawesome/css/all.css"/>
<style>
    /* it's important to set width/height to 100% for full-screen init */
    html, body {
        width: 100%;
        height: 100%;
        margin: 0px;
        overflow: hidden;
    }

</style>

<script>
/* !! NOT YET ACTIVE, still in development !! */
/* GLOBALS */
var m_serverconfig,m_mainLayout,m_mainForm,m_subForm,m_selectedFileGrid,m_workflowArray,m_fileBrowserGrid,m_fileBrowseGridMenu,m_workflowTabBar;
var m_realUploadpath = "";

/*load config from server*/
function loadserverconfig(){
   $.ajax({
        url:  ("/getserverconfig") ,
        type: "GET",
        success: function (response) {
            m_serverconfig = JSON.parse(response)
            init();
        },
        error: function (xhr, status) {
            dhtmlx.message("Fatal error, could not load serverconfig. " );
            document.body.innerHTML="Fatal error, could not load serverconfig. "+ xhr.responseText;
        }
    });
}

/* build basic page layout and init periodic job loading*/
function init(){

    //main layout
    m_mainLayout = new dhtmlXLayoutObject({
        parent: document.body,  
        pattern: "2U"           
    });
    
    m_mainLayout.setAutoSize("a", "a;b");//make left cell expand on resize
    
    
    m_mainLayout.cells("a").setMinWidth(50);
    m_mainLayout.cells("b").setMinWidth(50);
    m_mainLayout.cells("a").setMinHeight(50);
    m_mainLayout.cells("b").setMinHeight(50);  
    m_mainLayout.cells("a").setText("Schedule");

	m_fileBrowserGrid = m_mainLayout.cells("a").attachGrid();
    m_fileBrowserGrid.setImagePath("dependencies/dhtmlx/imgs");                 
    m_fileBrowserGrid.setHeader("id, Enabled, Name, Description, Frequency,  Last Run, Created on, Workflow config");//the headers of columns  
    m_fileBrowserGrid.setInitWidthsP("10,10,10,10,10,10,10,10");          //the widths of columns  
    m_fileBrowserGrid.setColAlign("left,left,left,left");       //the alignment of columns   
    m_fileBrowserGrid.setColTypes("ro,ro,ro,ro");                //the types of columns  
    m_fileBrowserGrid.setColSorting("str,str,str,int");          //the sorting types    
    m_fileBrowserGrid.init();      //finishes initialization and renders the grid on the page 
	
	m_fileBrowseGridMenu = m_mainLayout.cells("a").attachMenu({                                               
		items:[
            {id:"new", text:"New"},
			{id:"delete", text:"Delete"},
		]
	});
	
    
    m_mainLayout.cells("b").setText("Job Configuration");
    
    
    //EVENTS
    m_fileBrowserGrid.attachEvent("onRowSelect", function(id,ind){
		//show schedule in cells b
	});

    
}

</script>

</head>
<body onload="loadserverconfig()">

</body>