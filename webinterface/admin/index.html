<html>
<head>
<script src="/socket.io/socket.io.js"></script>
<script src="../dependencies/dhtmlx/dhtmlx.js"></script>
<link rel="stylesheet" href="../dependencies/dhtmlx/dhtmlx.css" type="text/css"/> 
<script src="../dependencies/dhtmlx/vault/vault.js"></script>
<link rel="stylesheet" href="../dependencies/dhtmlx/vault/vault.css" type="text/css"/> 
<script src="../dependencies/jquery/jquery.js"></script>
<script src="../configuration/staticStrings.js"></script>
<link rel="stylesheet" href="../dependencies/fontawesome/css/all.css"/>
<style>
    /* it's important to set width/height to 100% for full-screen init */
    html, body {
        width: 100%;
        height: 100%;
        margin: 0px;
        overflow: hidden;
    }

</style>

<script>

/* GLOBALS */
var m_mainLayout,m_mainForm;
var socket = io();
/* build basic page layout and init periodic job loading*/
function init(){
    socket.on('admin', function(msg){
     dhtmlx.message(msg);
    });
    
    m_mainLayout = new dhtmlXLayoutObject({
        parent: document.body,  
        pattern: "2U"           
    });
    m_mainLayout.cells("b").setText("Documentation");
    m_mainLayout.cells("b").attachObject("documentation");
    m_mainLayout.cells("b").showInnerScroll();
    //m_mainLayout.cells("a").setWidth();
    var m_mainTabBar = m_mainLayout.cells("a").attachTabbar({
        mode:               "top",
        align:              "left",
        close_button:       true,
        content_zone:       true,
        onload:             function(){},
        arrows_mode:        "auto" ,
        tabs: [ // tabs config
            {
                id:"serverconfig",text:"Server Configuration",width:null,index:0,active:true,enabled: true,close:false
            },
            /*{
                id:"upload",text:"Upload",width:null,index:1,active:false,enabled: true,close:false
            },*/
        ]
    });

	m_fileBrowseGridMenu = m_mainTabBar.tabs("serverconfig").attachMenu({                                               
		items:[
            {id:"save", text:"<i class='fas fa-save'></i>Save"},
			//{id:"default", text:"<i class='fas fa-backspace'></i>Load Default Config"},
		]
	});
	
    //mainform 
    m_mainForm  = m_mainTabBar.tabs("serverconfig").attachForm();

    // json/xml from server with callback
    m_mainForm.loadStruct("/adminconfig", function(){ });
    //workflow and start proc selected event
    m_mainForm.attachEvent("onChange", function (name, value, state){
            if (name == 'start_proc'){
                //waarn page reload without save
            }
    });
    
    m_fileBrowseGridMenu.attachEvent("onClick", function (name, value, state){
            if (name == 'save'){
                m_mainForm.send("/adminconfig", function(loader, response){
                m_mainForm  = m_mainTabBar.tabs("serverconfig").attachForm();
                    m_mainForm.loadStruct("/adminconfig", function(){ });
                });
            }
            if (name == 'default'){
                
            }
    });   
}

</script>

</head>
<body onload="init()">
<div id="documentation" style="margin-left:20px;white-space: pre-wrap;overflow:scroll">
<p>
STATIC_WEBSERVER_LISTEN_PORT
The Port that the webserver (not ffastrans) will listen on. Typical value: 80
Note: make sure the port you are entering is free on your server by using netstat on the commandline and check if anything is LISTENING on the port you desire
Webserver restart required after change

STATIC_USE_WEB_AUTHENTIFICATION
<a href="/signup"><b>Create Users here before (and after) enabling this option</b></a>
Enables password login for users and admins. <b>Make sure you have a created a user before you enable this or you cannot access the webserver anymore at all. </b>
In case you locked yourself out, open the database using a text editor (%installpath%\database\config) and set the authentification to false.

STATIC_UPLOADPATH
Make sure that all paths end with a backslash!
Users can upload files through the webinterface. This is where the uploaded files go to from perspective of the server where the webserver is installed on.
Make sure ffastrans can access the path where uploads go

STATIC_ALLOWED_BROWSE_LOCATIONS_DISPLAY_NAMES
Users can browse file repositories from the server on the webinterface. Here you configure what users will see in the File browsers "location" dropdown.
Multiple entries must be comma-separated (csv).
Make sure you have exactly the same amount of DISPLAY names as for the BROWSE_LOCATIONS below.
Example1: SOMEVALUE
Example2: FIRSTVALUE,SecondValue

STATIC_ALLOWED_BROWSE_LOCATIONS
Make sure that all paths end with a backslash!
See above, please make sure there are the same number of display_names and browse_locations configured. 
This is a list of comma-separated locations. 

Example1: D:\
Example2: \\FIRSTServer\share\folder,\\SecondServer\share

STATIC_API_HOST
FFAstrans Server, use localhost if this webserver runs on the same server as your main ffastrans server.

STATIC_API_PORT
FFAStrans API port, typically 65445

STATIC_INIT_RUNNING_GRID_COL_WIDTHS_PERCENT
Here you configure how the active job grid on the main webinterface looks like on page load. 
The values are percent, * is for "the rest" (only use one *).
Make sure there are exactly 10 values!
Example: 0,10,10,10,30,10,0,0,*,0

STATIC_INIT_FINISHED_GRID_COL_WIDTHS_PERCENT
Same as above but for the History job grid.
Only 9 values are allowed here!
Example: 5,10,0,0,30,10,0,5,*

<b>Important Informations: </b>
Database:
All values of this configuration and users are stored in this file %installpath%\database\config
You can always manually edit this file and restart the server. Also backing up this file might make sense in some cases

</p>
</div>
</body>